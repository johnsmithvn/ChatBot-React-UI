<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 ChatBot - Workspace Test Guide</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f8fafc;
            color: #1e293b;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #3b82f6;
            text-align: center;
            margin-bottom: 30px;
        }
        .step {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #3b82f6;
        }
        .step h3 {
            margin: 0 0 10px 0;
            color: #1e40af;
        }
        .expected {
            background: #dcfce7;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #16a34a;
        }
        .expected strong {
            color: #15803d;
        }
        .warning {
            background: #fef3c7;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #f59e0b;
        }
        .warning strong {
            color: #d97706;
        }
        .code {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        .success {
            background: #dcfce7;
            color: #166534;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            font-weight: bold;
            margin: 20px 0;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            margin: 10px 5px;
        }
        .btn:hover {
            background: #2563eb;
        }
        .btn-success {
            background: #16a34a;
        }
        .btn-warning {
            background: #f59e0b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 ChatBot React - Workspace Test Guide</h1>
        
        <div class="success">
            ✅ Workspace isolation đã được implement!<br>
            Chats giờ đây thuộc về workspace cụ thể
        </div>

        <div class="step">
            <h3>🏁 Step 1: Khởi chạy ứng dụng</h3>
            <div class="code">
                # Chạy trong terminal:
                npm run dev
                # hoặc double-click: start.bat
            </div>
            <div class="expected">
                <strong>Expected:</strong> Server chạy tại http://localhost:5173
            </div>
        </div>

        <div class="step">
            <h3>🏢 Step 2: Kiểm tra Workspace mặc định</h3>
            <p>Khi mở app lần đầu:</p>
            <div class="expected">
                <strong>Expected:</strong> 
                <ul>
                    <li>Có workspace "Default Workspace" được tạo tự động</li>
                    <li>Sidebar hiển thị workspace selector</li>
                    <li>Có một chat mặc định (nếu chưa có)</li>
                </ul>
            </div>
        </div>

        <div class="step">
            <h3>🆕 Step 3: Tạo workspace mới</h3>
            <p>1. Click "🏢 Workspaces" ở sidebar footer</p>
            <p>2. Tạo workspace mới: "Test Workspace"</p>
            <p>3. Mô tả: "Testing workspace isolation"</p>
            <div class="expected">
                <strong>Expected:</strong> 
                <ul>
                    <li>Workspace "Test Workspace" được tạo và selected</li>
                    <li>Sidebar hiển thị workspace mới</li>
                    <li>Chats cũ biến mất (vì thuộc workspace khác)</li>
                </ul>
            </div>
        </div>

        <div class="step">
            <h3>💬 Step 4: Tạo chats trong workspace mới</h3>
            <p>1. Click "New Chat" button</p>
            <p>2. Tạo thêm vài chats nữa</p>
            <p>3. Gửi messages trong các chats</p>
            <div class="expected">
                <strong>Expected:</strong> 
                <ul>
                    <li>Chats mới được tạo và hiển thị</li>
                    <li>Messages hoạt động bình thường</li>
                    <li>Chats có workspaceId = "Test Workspace"</li>
                </ul>
            </div>
        </div>

        <div class="step">
            <h3>🔄 Step 5: Test workspace switching</h3>
            <p>1. Đổi về workspace "Default Workspace"</p>
            <p>2. Quan sát sidebar</p>
            <p>3. Đổi lại "Test Workspace"</p>
            <div class="expected">
                <strong>Expected:</strong> 
                <ul>
                    <li>Khi đổi workspace → chỉ thấy chats của workspace đó</li>
                    <li>Chats không bị trộn lẫn giữa workspaces</li>
                    <li>Current chat được reset khi đổi workspace</li>
                </ul>
            </div>
        </div>

        <div class="step">
            <h3>📁 Step 6: Test groups trong workspace</h3>
            <p>1. Trong workspace, click ➕ next to "📁 Groups"</p>
            <p>2. Tạo group: "Development"</p>
            <p>3. Click ➕ next to group name để tạo chat trong group</p>
            <p>4. Tạo thêm group "Testing" và chat bên trong</p>
            <div class="expected">
                <strong>Expected:</strong> 
                <ul>
                    <li>Groups được tạo và hiển thị</li>
                    <li>Chats trong groups tự động expand</li>
                    <li>Chats ngoài groups hiển thị ở "Ungrouped Chats"</li>
                </ul>
            </div>
        </div>

        <div class="step">
            <h3>🔧 Step 7: Test persistence</h3>
            <p>1. Refresh page (F5)</p>
            <p>2. Kiểm tra workspaces và chats</p>
            <div class="expected">
                <strong>Expected:</strong> 
                <ul>
                    <li>Workspaces được lưu đúng</li>
                    <li>Chats thuộc đúng workspace</li>
                    <li>Groups và organization được maintain</li>
                </ul>
            </div>
        </div>

        <div class="warning">
            <strong>⚠️ Debugging:</strong> Mở Browser DevTools (F12) → Console để xem logs:
            <ul>
                <li>"Workspace chats updated" - khi chats thay đổi</li>
                <li>"Current workspace" - workspace hiện tại</li>
                <li>"Current chat" - chat hiện tại</li>
            </ul>
        </div>

        <div class="step">
            <h3>🎯 Step 8: Validate data structure</h3>
            <p>Trong Browser DevTools → Application → Local Storage:</p>
            <div class="code">
                workspace_chats: {
                  "default": [chat1, chat2],
                  "workspace_test": [chat3, chat4]
                }
                
                workspaces: [
                  { id: "default", name: "Default Workspace", groups: [...] },
                  { id: "workspace_test", name: "Test Workspace", groups: [...] }
                ]
            </div>
            <div class="expected">
                <strong>Expected:</strong> Chats được tách biệt theo workspace
            </div>
        </div>

        <div class="success">
            🎉 Nếu tất cả steps đều pass → Workspace isolation hoạt động đúng!
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <a href="#" class="btn btn-success" onclick="window.open('http://localhost:5173', '_blank')">
                🚀 Mở ChatBot App
            </a>
            <a href="#" class="btn btn-warning" onclick="alert('Kiểm tra Browser DevTools → Console để xem logs!')">
                🔍 Debug Mode
            </a>
        </div>
    </div>

    <script>
        // Auto-refresh every 30 seconds to check if server is running
        setInterval(() => {
            fetch('http://localhost:5173').then(() => {
                console.log('✅ Server is running');
            }).catch(() => {
                console.log('❌ Server is not running');
            });
        }, 30000);
    </script>
</body>
</html>
